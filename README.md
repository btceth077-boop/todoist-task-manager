# Task Manager v1

n8n workflow для управления задачами Todoist через Telegram с помощью AI-агента.

## Возможности

- Работа со всеми проектами Todoist (не только с одним)
- Создание задач в любом проекте
- Создание подзадач
- Получение списка задач (из всех проектов или конкретного)
- Завершение, удаление, обновление дедлайна задач
- Поддержка текстовых и голосовых сообщений в Telegram
- Ответы на русском языке в дружелюбном стиле

## Архитектура

```
Telegram Trigger → Switch (text/voice) → AI Agent → Telegram Response
                         ↓
                   Voice: OpenAI Whisper (транскрипция)

AI Agent Tools:
├── Get Projects   - список всех проектов
├── Get Tasks      - получение задач (все или по проекту)
├── Create Task    - создание задачи/подзадачи
├── Complete Task  - завершение задачи
├── Update Time    - изменение дедлайна
└── Delete Task    - удаление задачи
```

## Требования

- n8n (self-hosted или cloud)
- OpenAI API ключ (GPT-4o-mini + Whisper)
- Todoist OAuth2 credentials
- Telegram Bot Token

## Установка

1. Импортируй `Task Manager.json` в n8n
2. Настрой credentials:
   - **OpenAI API** — для AI Agent и транскрипции голоса
   - **Todoist OAuth2** — для работы с API Todoist
   - **Telegram Bot** — токен твоего бота
3. Активируй workflow

## Примеры команд

| Команда | Что делает |
|---------|------------|
| "Покажи мои проекты" | Список всех проектов с ID |
| "Покажи все задачи" | Все активные задачи из всех проектов |
| "Задачи из проекта Работа" | Задачи только из проекта "Работа" |
| "Создай задачу: купить молоко" | Создаёт в Inbox |
| "Создай задачу в проекте Личное: позвонить маме" | Создаёт в конкретном проекте |
| "Создай подзадачу для задачи X: сделать Y" | Создаёт подзадачу |
| "Перенеси задачу X на завтра" | Меняет дедлайн |
| "Выполни задачу X" | Отмечает как выполненную |
| "Удали задачу X" | Удаляет задачу |

## API Endpoints (Todoist REST v2)

| Инструмент | Метод | Endpoint |
|------------|-------|----------|
| Get Projects | GET | `/rest/v2/projects` |
| Get Tasks | GET | `/rest/v2/tasks` |
| Create Task | POST | `/rest/v2/tasks` |
| Complete Task | POST | `/rest/v2/tasks/{id}/close` |
| Update Time | POST | `/rest/v2/tasks/{id}` |
| Delete Task | DELETE | `/rest/v2/tasks/{id}` |

## Параметры Create Task

| Параметр | Тип | Описание |
|----------|-----|----------|
| content | string | Название задачи (обязательный) |
| due_string | string | Дедлайн на английском ("tomorrow", "next Monday") |
| description | string | Описание задачи |
| project_id | string | ID проекта (если не указан — Inbox) |
| parent_id | string | ID родительской задачи (для подзадач) |

## Настройки

- **Timezone**: Europe/Sarajevo (можно изменить в промпте)
- **Язык ответов**: Русский
- **Модель**: GPT-4o-mini
- **Память контекста**: 10 последних сообщений

## Решение проблем

**Бот не видит задачи**
- Проверь что Todoist OAuth2 credentials подключены
- Убедись что токен не истёк

**Бот создаёт задачи в неправильном проекте**
- Убедись что называешь проект точно как в Todoist
- Попроси бота сначала показать список проектов

**Голосовые сообщения не работают**
- Проверь OpenAI API credentials
- Убедись что модель Whisper доступна

## Версия

**v1.0** — Первый релиз
- Поддержка всех проектов
- Подзадачи
- Голосовые сообщения
